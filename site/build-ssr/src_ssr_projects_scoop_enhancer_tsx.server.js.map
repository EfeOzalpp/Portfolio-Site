{"version":3,"file":"src_ssr_projects_scoop_enhancer_tsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/ssr/projects/scoop.enhancer.tsx"],"sourcesContent":["// src/sections/ScoopEnhancer.tsx\r\nimport { useEffect, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport SplitDragHandler from '../../utils/split-controller';\r\nimport { useTooltipInit } from '../../utils/tooltip/tooltipInit';\r\nimport { applySplitStyle } from '../logic/apply-split-style';\r\n\r\nexport default function ScoopEnhancer() {\r\n  const [host, setHost] = useState<HTMLElement | null>(null);\r\n  const [split, setSplit] = useState(() => (window.innerWidth < 768 ? 55 : 50));\r\n  const [isPortrait, setIsPortrait] = useState(window.innerHeight > window.innerWidth);\r\n\r\n  useTooltipInit();\r\n\r\n  useEffect(() => {\r\n    // Remove SSR preset so JS can control layout without specificity fights\r\n    document.getElementById('scoop-ssr')?.classList.remove('ssr-initial-split');\r\n\r\n    // Upgrade images/videos from SSR medium-quality to high-quality (if provided)\r\n    const img1El = document.getElementById('scoop-media-1') as HTMLImageElement | null;\r\n    const img2ImgEl = document.getElementById('scoop-media-2') as HTMLImageElement | null;\r\n    const img2VidEl = document.getElementById('scoop-media-2-video') as HTMLVideoElement | null;\r\n\r\n    const full1 = img1El?.dataset?.srcFull;\r\n    const full2 = img2ImgEl?.dataset?.srcFull || img2VidEl?.dataset?.srcFull;\r\n\r\n    if (img1El && full1 && img1El.src !== full1) img1El.src = full1;\r\n    if (img2ImgEl && full2 && img2ImgEl.src !== full2) img2ImgEl.src = full2;\r\n    if (img2VidEl && full2 && img2VidEl.poster !== full2) img2VidEl.poster = full2;\r\n\r\n    // Set mount host\r\n    setHost(document.getElementById('scoop-enhancer-mount'));\r\n\r\n    // Initial apply\r\n    applySplitStyle(split, isPortrait, {\r\n      m1: 'scoop-media-1-container',\r\n      m2: 'scoop-media-2-container',\r\n    });\r\n\r\n    // Orientation listener\r\n    const onResize = () => {\r\n      const p = window.innerHeight > window.innerWidth;\r\n      setIsPortrait(p);\r\n      applySplitStyle(split, p, {\r\n        m1: 'scoop-media-1-container',\r\n        m2: 'scoop-media-2-container',\r\n      });\r\n    };\r\n    window.addEventListener('resize', onResize, { passive: true });\r\n    return () => window.removeEventListener('resize', onResize);\r\n  }, []); // run once\r\n\r\n  // Keep DOM in sync when split OR orientation changes\r\n  useEffect(() => {\r\n    applySplitStyle(split, isPortrait, {\r\n      m1: 'scoop-media-1-container',\r\n      m2: 'scoop-media-2-container',\r\n    });\r\n  }, [split, isPortrait]);\r\n\r\n  if (!host) return null;\r\n    return createPortal(\r\n      <SplitDragHandler\r\n        split={split}\r\n        setSplit={setSplit}\r\n        ids={{ m1: 'scoop-media-1-container', m2: 'scoop-media-2-container' }}\r\n      />,\r\n      host\r\n  );\r\n}\r\n"],"names":["useEffect","useState","createPortal","SplitDragHandler","useTooltipInit","applySplitStyle","jsx","_jsx","ScoopEnhancer","host","setHost","split","setSplit","window","innerWidth","isPortrait","setIsPortrait","innerHeight","document","getElementById","classList","remove","img1El","img2ImgEl","img2VidEl","full1","dataset","srcFull","full2","src","poster","m1","m2","onResize","p","addEventListener","passive","removeEventListener","ids"],"sourceRoot":""}