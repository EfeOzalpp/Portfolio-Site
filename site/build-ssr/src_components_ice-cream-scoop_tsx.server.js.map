{"version":3,"file":"src_components_ice-cream-scoop_tsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/components/ice-cream-scoop.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport client from '../utils/sanity';\r\nimport SplitDragHandler from '../utils/split-controller';\r\nimport MediaLoader from '../utils/media-providers/media-loader';\r\nimport { useTooltipInit } from '../utils/tooltip/tooltipInit';\r\nimport { useSsrData } from '../utils/context-providers/ssr-data-context';\r\nimport '../styles/block-type-1.css';\r\n\r\ntype VideoSet = {\r\n  webmUrl?: string;\r\n  mp4Url?: string;\r\n  poster?: any; // Sanity image\r\n};\r\n\r\ntype MediaSlot = {\r\n  alt?: string;\r\n  image?: any;\r\n  video?: VideoSet;\r\n};\r\n\r\ntype IceData = {\r\n  mediaOne: MediaSlot;\r\n  mediaTwo: MediaSlot;\r\n};\r\n\r\nconst IceCreamScoop = () => {\r\n  const ssrData = useSsrData();\r\n  const preloadedData: IceData | null = ssrData?.preloaded?.['ice-scoop'] || null;\r\n\r\n  const [data, setData] = useState<IceData | null>(preloadedData);\r\n  const [split, setSplit] = useState(() => (window.innerWidth < 1024 ? 45 : 50));\r\n  const [isPortrait, setIsPortrait] = useState(window.innerHeight > window.innerWidth);\r\n\r\n  useTooltipInit();\r\n\r\n  // Orientation listener\r\n  useEffect(() => {\r\n    const handleResize = () => setIsPortrait(window.innerHeight > window.innerWidth);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  // Fetch from Sanity only if not already preloaded\r\n  useEffect(() => {\r\n    if (data) return;\r\n    client\r\n      .fetch<IceData>(\r\n        `*[_type == \"mediaBlock\" && slug.current == $slug][0]{\r\n          mediaOne{\r\n            alt,\r\n            image,\r\n            video{\r\n              \"webmUrl\": webm.asset->url,\r\n              \"mp4Url\": mp4.asset->url,\r\n              poster\r\n            }\r\n          },\r\n          mediaTwo{\r\n            alt,\r\n            image,\r\n            video{\r\n              \"webmUrl\": webm.asset->url,\r\n              \"mp4Url\": mp4.asset->url,\r\n              poster\r\n            }\r\n          }\r\n        }`,\r\n        { slug: 'ice-scoop' }\r\n      )\r\n      .then(setData)\r\n      .catch((err: any) => {\r\n        console.warn('[IceCreamScoop] GROQ fetch failed:', err);\r\n        setData(null);\r\n      });\r\n  }, [data]);\r\n\r\n  if (!data) return null;\r\n\r\n  const media1 = data.mediaOne;\r\n  const media2 = data.mediaTwo;\r\n\r\n  const alt1 = media1?.alt || 'Ice Cream Scoop media';\r\n  const alt2 = media2?.alt || 'Ice Cream Scoop media';\r\n\r\n  const media2IsVideo = Boolean(media2?.video?.webmUrl || media2?.video?.mp4Url);\r\n\r\n  return (\r\n    <section className=\"block-type-1\" style={{ position: 'relative' }}>\r\n      {/* LEFT / TOP */}\r\n      <div\r\n        className=\"media-content-1\"\r\n        style={\r\n          isPortrait\r\n            ? {\r\n                height: split <= 20 ? '0%' : `${split}%`,\r\n                width: '100%',\r\n                position: 'absolute',\r\n                top: 0,\r\n                transition: split <= 20 ? 'height 0.1s ease' : 'none',\r\n              }\r\n            : {\r\n                width: `${split}%`,\r\n                height: '100%',\r\n                position: 'absolute',\r\n                left: 0,\r\n              }\r\n        }\r\n      >\r\n        <MediaLoader\r\n          type=\"image\"\r\n          src={media1?.image}\r\n          alt={alt1}\r\n          id=\"icecream-media-1\"\r\n          className=\"media-item-1 tooltip-ice-scoop\"\r\n          objectPosition=\"left center\"\r\n          style={{ width: '100%', height: '100%' }}\r\n        />\r\n      </div>\r\n\r\n      {/* SPLITTER */}\r\n      <SplitDragHandler split={split} setSplit={setSplit} />\r\n\r\n      {/* RIGHT / BOTTOM */}\r\n      <div\r\n        className=\"media-content-2\"\r\n        style={\r\n          isPortrait\r\n            ? {\r\n                height: split <= 20 ? '100%' : `${100 - split}%`,\r\n                width: '100%',\r\n                position: 'absolute',\r\n                top: split <= 20 ? '0%' : `${split}%`,\r\n                transition: split <= 20 ? 'height 0.1s ease, top 0.1s ease' : 'none',\r\n              }\r\n            : {\r\n                width: `${100 - split}%`,\r\n                height: '100%',\r\n                position: 'absolute',\r\n                left: `${split}%`,\r\n              }\r\n        }\r\n      >\r\n        <MediaLoader\r\n          type={media2IsVideo ? 'video' : 'image'}\r\n          src={media2IsVideo ? media2.video! : media2.image!}\r\n          alt={alt2}\r\n          id=\"icecream-media-2\"\r\n          className=\"media-item-2 tooltip-ice-scoop\"\r\n          objectPosition=\"center bottom\"\r\n          style={{ width: '100%', height: '100%' }}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default IceCreamScoop;\r\n"],"names":["useEffect","useState","client","SplitDragHandler","MediaLoader","useTooltipInit","useSsrData","jsx","_jsx","jsxs","_jsxs","IceCreamScoop","ssrData","preloadedData","preloaded","data","setData","split","setSplit","window","innerWidth","isPortrait","setIsPortrait","innerHeight","handleResize","addEventListener","removeEventListener","fetch","slug","then","catch","err","console","warn","media1","mediaOne","media2","mediaTwo","alt1","alt","alt2","media2IsVideo","Boolean","video","webmUrl","mp4Url","className","style","position","children","height","width","top","transition","left","type","src","image","id","objectPosition"],"sourceRoot":""}